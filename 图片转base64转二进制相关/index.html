<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<body>
		<h3>添加</h3>
	<form id="addInfo" method="POST" enctype="multipart/form-data">
		callback：<input type="text" name="callback"><br>
		图片：<input type="file" name="photoupload"><br>
		姓名：<input type="text" name="imgname"><br>
		证件号码：<input type="text" name="imgcard"><br>
		证件类型：<select>
			<option value="1">身份证</option>
			<option value="2">护照</option>
			<option value="3">其他</option>
		</select><br>
		<input id="add-info" type="submit" value="submit">
	</form>
	
	<hr>
	
	<h3>图片搜索</h3>
	<form id="picSubmit" method="POST" enctype="multipart/form-data">
		图片：<input type="file" id="photoupload" name="photoupload"><br>
		<input id="search-pic" type="button" value="发送">
	</form>
	
	<h3>信息搜索</h3>
	<form method="POST" id="search11" enctype="multipart/form-data">
		姓名：<input type="text" name="imgname" id="imgname"><br>
		证件号：<input type="text" name="imgcard" id="imgcard"><br>
		证件类型：<select>
			<option value="1">身份证</option>
			<option value="2">护照</option>
			<option value="3">其他</option>
		</select><br>
		<input id="search-info" type="button" value="发送">
	</form>
	</body>
</html>
<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery.form.js" type="text/javascript" charset="utf-8"></script>
<script src="js/layer2.1/layer.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	var index=null;
	//--------添加用户---------------------
	$("#addInfo").click(function(){
		var form = $("#addInfo");  
		var options  = {    
			url:'http://10.24.102.36/api/add/format/json',   
			type:'post', 
			dataType:'json',
			beforeSend:function(){
  	      		index = layer.load(2,{});
  	      	  },
  	      	 complete:function(){
  	      		setTimeout(function(){
  	      	 		layer.close(index);
  	      	 	},1000)
  	      	  },
			success:function(data) {
				console.log(data)
			},
			error:function(){
				alert("error");
				console.log(index)
				layer.close(index);
			}
		};    
		form.ajaxSubmit(options);
	})
	//-------图片搜索接口对接----------------
	$("#search-pic").click(function(){
	    var form = $("#picSubmit");  
		var options  = {    
			url:'http://10.24.102.36/api/search_img/format/json',   
			type:'post', 
			dataType:'json',
			beforeSend:function(){
  	      		index = layer.load(2,{});
  	      	  },
  	      	 complete:function(){
  	      		setTimeout(function(){
  	      	 		layer.close(index);
  	      	 	},1000)
  	      	  },
			success:function(data) {
				console.log(data)
			},
			error:function(){
				alert("error")
				layer.close(index);
			}
		};    
		form.ajaxSubmit(options);
	})
	//------姓名和证件号信息搜索----
	$("#search-info").click(function(){
		var form=$("#search11");
		var options  = {    
			url:'http://10.24.102.36/api/search_info/format/json',   
			type:'post', 
			dataType:'json',
			beforeSend:function(){
  	      		index = layer.load(2,{});
  	      	  },
  	      	 complete:function(){
  	      	 	setTimeout(function(){
  	      	 		layer.close(index);
  	      	 	},1000)
  	      		
  	      	  },
			success:function(data) {
				console.log(data)
			},
			error:function(){
				console.log(index);
				layer.close(index);
			}
		};    
		form.ajaxSubmit(options);
	})
</script>